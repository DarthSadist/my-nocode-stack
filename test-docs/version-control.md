# Система контроля версий документации по тестированию

## Введение

Данный документ описывает процедуры контроля версий документации по тестированию стека. Система контроля версий обеспечивает отслеживание изменений, возможность отката к предыдущим версиям и синхронизацию обновлений между членами команды.

## Таблица версий

| Версия | Дата        | Автор           | Описание изменений                                          |
|--------|-------------|-----------------|-------------------------------------------------------------|
| 1.0.0  | 2025-05-09  | Администратор   | Начальная версия документации по тестированию               |
| 1.1.0  | 2025-05-09  | Администратор   | Исправление путей к файлам, согласование доменных имен     |
| 1.2.0  | 2025-05-09  | Администратор   | Стандартизация переменных окружения                         |
| 1.3.0  | 2025-05-09  | Администратор   | Создание скриптов автоматизации тестирования                |
| 1.4.0  | 2025-05-09  | Администратор   | Добавление процедур восстановления после сбоев              |
| 1.5.0  | 2025-05-09  | Администратор   | Добавление системы контроля версий документации             |

## Структура контроля версий

Для управления версиями документации используются следующие принципы:

### Схема нумерации версий

Версии документации по тестированию следуют семантической схеме версионирования `X.Y.Z`, где:

- **X** - мажорная версия (значительные изменения в структуре или содержании)
- **Y** - минорная версия (добавление новых разделов или функциональности)
- **Z** - патч (исправление ошибок, опечаток, форматирования)

### Правила инкрементирования версий

1. **Мажорная версия (X)** увеличивается при:
   - Полной реорганизации структуры документации
   - Изменении основных методологий тестирования
   - Перестройке автоматизации тестирования

2. **Минорная версия (Y)** увеличивается при:
   - Добавлении новых разделов документации
   - Внедрении новых скриптов автоматизации
   - Добавлении новых компонентов для тестирования

3. **Патч (Z)** увеличивается при:
   - Исправлении опечаток и ошибок форматирования
   - Уточнении существующих инструкций
   - Обновлении команд без изменения их функциональности

## Процедура обновления документации

### Внесение изменений

1. Перед внесением изменений проверьте текущую версию документации
2. Создайте резервную копию файлов, которые будут изменены
3. Внесите необходимые изменения
4. Обновите номер версии в соответствии с характером изменений
5. Обновите таблицу версий в этом документе
6. Добавьте запись в журнал изменений (см. ниже)

### Автоматизация контроля версий

Для автоматизации контроля версий используется следующий скрипт:

```bash
#!/bin/bash
# Скрипт для управления версиями документации
# Сохраните как ~/my-nocode-stack/test-docs/version-update.sh

VERSION_FILE="$HOME/my-nocode-stack/test-docs/version-control.md"
CHANGELOG_FILE="$HOME/my-nocode-stack/test-docs/changelog.md"

# Функция для извлечения текущей версии
get_current_version() {
  grep "| [0-9]\.[0-9]\.[0-9] |" "$VERSION_FILE" | tail -1 | awk -F'|' '{print $2}' | tr -d ' '
}

# Функция для обновления версии
update_version() {
  local current_version=$(get_current_version)
  local major=$(echo $current_version | cut -d. -f1)
  local minor=$(echo $current_version | cut -d. -f2)
  local patch=$(echo $current_version | cut -d. -f3)
  
  case "$1" in
    major)
      major=$((major + 1))
      minor=0
      patch=0
      ;;
    minor)
      minor=$((minor + 1))
      patch=0
      ;;
    patch)
      patch=$((patch + 1))
      ;;
    *)
      echo "Некорректный тип версии. Используйте: major, minor или patch"
      exit 1
      ;;
  esac
  
  echo "${major}.${minor}.${patch}"
}

# Проверка аргументов
if [ $# -lt 2 ]; then
  echo "Использование: $0 [major|minor|patch] \"Описание изменений\""
  exit 1
fi

VERSION_TYPE="$1"
DESCRIPTION="$2"
AUTHOR="${3:-Администратор}"

# Обновление версии
NEW_VERSION=$(update_version "$VERSION_TYPE")
CURRENT_DATE=$(date +%Y-%m-%d)

# Обновление таблицы версий
NEW_ENTRY="| $NEW_VERSION  | $CURRENT_DATE  | $AUTHOR   | $DESCRIPTION |"
sed -i "/| Версия | Дата/a $NEW_ENTRY" "$VERSION_FILE"

# Обновление журнала изменений
if [ -f "$CHANGELOG_FILE" ]; then
  echo -e "## Версия $NEW_VERSION - $CURRENT_DATE\n\n### Автор: $AUTHOR\n\n$DESCRIPTION\n\n---\n\n$(cat $CHANGELOG_FILE)" > "$CHANGELOG_FILE.tmp"
  mv "$CHANGELOG_FILE.tmp" "$CHANGELOG_FILE"
else
  echo -e "# Журнал изменений документации по тестированию\n\n## Версия $NEW_VERSION - $CURRENT_DATE\n\n### Автор: $AUTHOR\n\n$DESCRIPTION\n" > "$CHANGELOG_FILE"
fi

echo "Версия обновлена до $NEW_VERSION"
echo "Описание: $DESCRIPTION"
echo "Таблица версий и журнал изменений обновлены"
```

## Журнал изменений

Подробный журнал изменений хранится в отдельном файле `changelog.md`. Журнал содержит:

- Номер версии
- Дату изменения
- Автора изменений
- Подробное описание внесенных изменений
- Причины изменений (по необходимости)

## Рекомендации по использованию

1. **Регулярно обновляйте документацию** по мере внесения изменений в стек или методологию тестирования
2. **Используйте систему контроля версий** для всех файлов документации
3. **Придерживайтесь принятой структуры** при создании новых документов
4. **Обновляйте индексный файл** при добавлении новых документов
5. **Синхронизируйте изменения** между всеми членами команды

## Управление ветками (для Git)

При использовании Git для управления документацией рекомендуется следующая структура веток:

- `master` - стабильная версия документации
- `develop` - текущая разрабатываемая версия
- `feature/имя_функции` - для разработки новых разделов или функциональности
- `hotfix/описание_исправления` - для срочных исправлений ошибок

## Процедура релиза новой версии

1. Убедитесь, что все изменения внесены и протестированы
2. Обновите номер версии с помощью скрипта `version-update.sh`
3. Обновите индексный файл, добавив ссылки на новые документы
4. Запустите скрипт обновления документации `update-documentation.sh`
5. Проверьте целостность и согласованность всей документации
6. Создайте резервную копию новой версии документации

## Обратная связь и улучшения

Если вы обнаружили ошибки в документации или у вас есть предложения по улучшению, внесите изменения и обновите версию согласно описанной процедуре.

---

*Данный документ является неотъемлемой частью документации по тестированию и должен обновляться вместе с ней.*
